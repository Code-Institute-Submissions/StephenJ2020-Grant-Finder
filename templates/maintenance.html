{% extends "base.html" %}
{% block content %}

<h3 class="center-align">Manage Elements</h3>

<div class="row">
  <div class="col s12 m4">
    <h4 class="center-align">Manage Categories</h4>
    <div class="row">
      <div class="col s12 center-align">
        <a href="{{ url_for('add_category') }}" class="waves-effect waves-light btn-large">
          Add Category <i class="fas fa-plus-square right"></i>
        </a>
      </div>
    </div>
    {% for category in categories %}
    <div class="col s12">
      <div class="card bg-dark-gray">
        <div class="card-content white-text">
          <span class="card-title">{{ category.category_name }}</span>
        </div>
        <div class="card-action">
          <a href="{{ url_for('edit_category', category_id=category._id) }}" class="waves-effect waves-light btn-small">Edit</a>
          <a href="{{ url_for('delete_category', category_id=category._id) }}" class="waves-effect waves-light btn-small red lighten-1">Delete</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
<!-- Manager Users -->
  <div class="col s12 m4">
    <h4 class="center-align">Manage Users</h4>
    {% for user in users %}
    <div class="col s12">
      <div class="card bg-gray">
        <div class="card-content white-text">
          <span class="card-title">{{ user.username }}</span>
        </div>
        <div class="card-action">
          <a href="{{ url_for('edit_user', user_id=user._id) }}" class="waves-effect waves-light btn-small">Edit</a>
          <a href="{{ url_for('delete_user', user_id=user._id) }}" class="waves-effect waves-light btn-small red lighten-1">Delete</a>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
<!-- Manager Organisations -->
  <div class="col s12 m4">
    <h4 class="center-align">Manage Organisations</h4>
    <div class="row">
      <div class="col s12 center-align">
        <a href="{{ url_for('add_organisation') }}" class="waves-effect waves-light btn-large">
          Add Organisation <i class="fas fa-plus-square right"></i>
        </a>
      </div>
    </div>
    {% for organisation in organisations %}
    <div class="col s12">
      <div class="card bg-dark-gray">
        <div class="card-content white-text">
          <span class="card-title">{{ organisation.organisation_name }}</span>
        </div>
        <div class="card-action">
          {% if session.user|lower == "admin" %}
          <a href="{{ url_for('edit_organisation', organisation_id=organisation._id) }}"
            class="waves-effect waves-light btn-small">Edit</a>
          <!-- Modal Trigger -->
          <a class="waves-effect waves-light btn-small red lighten-1 modal-trigger"
            href="#confirm-delete{{ organisation._id }}">Delete</a>

          <!-- Modal Structure -->
          <div id="confirm-delete{{ organisation._id }}" class="modal">
            <div class="modal-content">
              <h4>Are you Sure you want to permanently Delete this
                Organisation?</h4>
              <p>
                <a href="{{ url_for('delete_organisation', organisation_id=organisation._id) }}"
                  class="col s8 waves-effect waves-light btn-large modal-close">
                  Confirm Delete &nbsp;<i class="fas fa-check-circle"></i>
                </a>
                <a href="{{ url_for('get_maintenance') }}"
                  class="col s4 waves-effect waves-light btn-large red lighten-1 modal-close">
                  Cancel Delete &nbsp;<i class="fas fa-window-close"></i>
                </a>
              </p>
            </div>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

{% endblock %}